<!DOCTYPE html>

<html class="no-js">
  
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Weather Dashboard</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="./style.css" />
    
  </head>
  <body>
   <!-- testing Bootstrap -->
    <!-- <h1>Hello world!</h1> -->
        <!-- this is outside the container so it stretches across browser -->
        <div>
                <p id="dashboard">Weather Dashboard</p>
        </div>

 <div class="container">
     <!--one row for the entire dashboard-->
     <div>
         <!--3 of 12 columns for the search form and recent searches-->
         <section class="col-sm-3" id="searchSection">
             <!-- <p id="searchHeader">Search for a city:</p> -->

             <form id="searchCity">
                <label>Search for a city</label>
                <input type="text" id="city-input">
                 <!-- This button will trigger our AJAX call -->
                <input id="searchButton" type="submit" value="Submit">
              </form>   
         </section>

         <!--9 of 12 columns for the main display section-->
         <div class="col-sm-9">
             <!--this is where the current conditions are displayed-->
             <div>
                <!--this is where the current conditions are displayed-->
                <div class="col-sm-12" id="currentStats"></div>
             </div>

             <div>
                 <!--this is where the 5-day forecast will go and float left-->
                 <div class="col-sm-12" id="fiveDayForecast"></div>
             </div>
                        
         </div>

     </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    var cities =[""];
    $(document).ready(function() {
    
    // this .on click is where we generate the AJAX call
    $("#searchButton").on("click", function(event) {
    
    //event.preventDefault prevents the submit button from trying to submit a form therefore reloading the page, when clicked
    event.preventDefault();

    // Here we grab the text from the input box
    var citySearch = $("#city-input").val().trim();

    // This is our API key so that we don't have to type out a long URL
     var APIKey = "924c9807e2ecee5b538b9faeb8d6306b";

    // Here we have built the URL we need to query the database
var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + citySearch + "&appid=" + APIKey + "&units=imperial";

    $.ajax({
          url: queryURL,
          method: "GET"
        }).then(function(response) {
            console.log(response);
        //   $("#currentStats").text(JSON.stringify(response));
        console.log("the temperature is " + response.main.temp + " degrees Fahrenheit");
        console.log("the humidity is " + response.main.humidity + " percent");
        console.log("the wind speed is " + response.wind.speed + " MPH");
        console.log("the conditions are " + response.weather[0].main + " and the weather icon code is " + response.weather[0].icon);
        console.log("the coordinates are " + response.coord.lat + " degrees latitude / " + response.coord.lon + " degrees longitude");
       
        });

    //     http://api.openweathermap.org/data/2.5/uvi?appid={appid}&lat={lat}&lon={lon}

// var queryUvIndex = "https://api.openweathermap.org/data/2.5/uvi?appid=" + APIKey +"&lat=" + 33.75 + "&lon=" +-88.39;

// $.ajax({
//           url: queryFiveDayURL,
//           method: "GET"
//         }).then(function(response) {
//             console.log(response);
//         //   $("#currentStats").text(JSON.stringify(response));
//         });
        

    // api.openweathermap.org/data/2.5/forecast?q={city name}&appid={your api key}

var queryFiveDayURL = "https://api.openweathermap.org/data/2.5/forecast?q=" + citySearch + "&appid=" + APIKey + "&units=imperial";

    $.ajax({
          url: queryFiveDayURL,
          method: "GET"
        }).then(function(response) {
            console.log(response);
        //   $("#currentStats").text(JSON.stringify(response));
        //console log on 24 hours ahead of query, assumes will be done in the afternoon obviously.
        //list[i] can go up to index 39.  weather [i] is always 0.
        //might need an if /else to narrow this down to always return afternoon forecasts.
            console.log(response.list[39].weather[0].main);
            console.log(response.list[39].weather[0].icon);
            console.log("the date forecasted is " + JSON.stringify(response.list[39].dt_txt));
        });
    
        //INFORMATION ON INCORPORATING ICONS
    // <div id="icon"><img id="wicon" src="" alt="Weather icon"></div>
//At the HTML above you see the unique thing missing is the src attribute, so let's fill it with some jQuery and JavaScript. You may create a variables to hold the icon code provided by the API like:

//var iconcode = a.weather[0].icon;
//After it you should concatenate this var iconcode with the url that contains the icons, like:

//var iconurl = "http://openweathermap.org/img/w/" + iconcode + ".png";
//Finally just change src attribute in the DOM by doing this:

//$('#wicon').attr('src', iconurl);
        
        
    // var city = $(this).attr("data-name");


    })
})

    
    </script>
    <script src="./script.js"></script>
  </body>
</html>
